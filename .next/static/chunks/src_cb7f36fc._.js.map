{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/avatar.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,qKAAA,CAAA,OAAoB;QACnB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;;;;;;;AAGb,OAAO,WAAW,GAAG,qKAAA,CAAA,OAAoB,CAAC,WAAW;AAErD,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,qKAAA,CAAA,QAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,+BAA+B;QAC5C,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,qKAAA,CAAA,QAAqB,CAAC,WAAW;AAE3D,MAAM,+BAAiB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,qKAAA,CAAA,WAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,wEACA;QAED,GAAG,KAAK;;;;;;;AAGb,eAAe,WAAW,GAAG,qKAAA,CAAA,WAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/dropdown-menu.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAAA;AAAA;AAEA;AANA;;;;;;AAQA,MAAM,eAAe,+KAAA,CAAA,OAA0B;AAE/C,MAAM,sBAAsB,+KAAA,CAAA,UAA6B;AAEzD,MAAM,oBAAoB,+KAAA,CAAA,QAA2B;AAErD,MAAM,qBAAqB,+KAAA,CAAA,SAA4B;AAEvD,MAAM,kBAAkB,+KAAA,CAAA,MAAyB;AAEjD,MAAM,yBAAyB,+KAAA,CAAA,aAAgC;AAE/D,MAAM,uCAAyB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAK5C,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBAC3C,6LAAC,+KAAA,CAAA,aAAgC;QAC/B,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,0MACA,SAAS,QACT;QAED,GAAG,KAAK;;YAER;0BACD,6LAAC,yNAAA,CAAA,eAAY;gBAAC,WAAU;;;;;;;;;;;;;AAG5B,uBAAuB,WAAW,GAChC,+KAAA,CAAA,aAAgC,CAAC,WAAW;AAE9C,MAAM,uCAAyB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAG5C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,+KAAA,CAAA,aAAgC;QAC/B,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,ybACA;QAED,GAAG,KAAK;;;;;;;AAGb,uBAAuB,WAAW,GAChC,+KAAA,CAAA,aAAgC,CAAC,WAAW;AAE9C,MAAM,oCAAsB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGzC,CAAC,EAAE,SAAS,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC1C,6LAAC,+KAAA,CAAA,SAA4B;kBAC3B,cAAA,6LAAC,+KAAA,CAAA,UAA6B;YAC5B,KAAK;YACL,YAAY;YACZ,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,ybACA;YAED,GAAG,KAAK;;;;;;;;;;;;AAIf,oBAAoB,WAAW,GAAG,+KAAA,CAAA,UAA6B,CAAC,WAAW;AAE3E,MAAM,iCAAmB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAKtC,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,6LAAC,+KAAA,CAAA,OAA0B;QACzB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,qSACA,SAAS,QACT;QAED,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG,+KAAA,CAAA,OAA0B,CAAC,WAAW;AAErE,MAAM,yCAA2B,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAG9C,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE,oBAC7C,6LAAC,+KAAA,CAAA,eAAkC;QACjC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,wOACA;QAEF,SAAS;QACR,GAAG,KAAK;;0BAET,6LAAC;gBAAK,WAAU;0BACd,cAAA,6LAAC,+KAAA,CAAA,gBAAmC;8BAClC,cAAA,6LAAC,uMAAA,CAAA,QAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;YAGpB;;;;;;;;AAGL,yBAAyB,WAAW,GAClC,+KAAA,CAAA,eAAkC,CAAC,WAAW;AAEhD,MAAM,sCAAwB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAG3C,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC,+KAAA,CAAA,YAA+B;QAC9B,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,wOACA;QAED,GAAG,KAAK;;0BAET,6LAAC;gBAAK,WAAU;0BACd,cAAA,6LAAC,+KAAA,CAAA,gBAAmC;8BAClC,cAAA,6LAAC,yMAAA,CAAA,SAAM;wBAAC,WAAU;;;;;;;;;;;;;;;;YAGrB;;;;;;;;AAGL,sBAAsB,WAAW,GAAG,+KAAA,CAAA,YAA+B,CAAC,WAAW;AAE/E,MAAM,kCAAoB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAKvC,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,6LAAC,+KAAA,CAAA,QAA2B;QAC1B,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,qCACA,SAAS,QACT;QAED,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,+KAAA,CAAA,QAA2B,CAAC,WAAW;AAEvE,MAAM,sCAAwB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAG3C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,+KAAA,CAAA,YAA+B;QAC9B,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,4BAA4B;QACzC,GAAG,KAAK;;;;;;;AAGb,sBAAsB,WAAW,GAAG,+KAAA,CAAA,YAA+B,CAAC,WAAW;AAE/E,MAAM,uBAAuB,CAAC,EAC5B,SAAS,EACT,GAAG,OACmC;IACtC,qBACE,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8CAA8C;QAC3D,GAAG,KAAK;;;;;;AAGf;OAVM;AAWN,qBAAqB,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 299, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/constants.ts"],"sourcesContent":["// src/lib/constants.ts\nimport type { SettingsFormData, NavItem } from '@/types';\nimport { \n    LayoutDashboard, \n    Database, \n    Settings as SettingsIcon, \n    Info, \n    BookOpen, \n    GanttChartSquare, \n    UserCircle, \n    Users,\n    UserCog // Added for preferences\n} from 'lucide-react';\n\nexport const APP_NAME = \"BreachWatch\";\n\n// Default settings for the Settings page form\nexport const DEFAULT_SETTINGS: SettingsFormData = {\n  keywords: 'password, admin, backup, confidential, private, secret, credentials, user, username, pwd, pass, nik, no_ktp, nama_lengkap, gaji, salary, bank, account, cc, card, token, api_key',\n  fileExtensions: 'txt, csv, sql, json, zip, tar.gz, 7z, rar, db, sqlite, bak, log, config, xlsx, docx, pdf, env, pem, key, dat, dump',\n  seedUrls: 'https://pastebin.com\\nhttps://gist.github.com',\n  searchDorks: `filetype:sql \"passwords\" site:pastebin.com\nfiletype:txt \"nik\" | \"no_ktp\" | \"nama_lengkap\" site:.go.id\nintitle:\"index of\" \"backup.zip\" site:.co.id\nfiletype:env \"DB_PASSWORD\" -github.com site:.ac.id\ninurl:\"/admin/config.php\" filetype:php \"DB_PASSWORD\"\nfiletype:log username password site:*.go.id\nintitle:\"phpinfo()\" \"mysql_connect\"\nintext:\"BEGIN RSA PRIVATE KEY\" filetype:key`,\n  crawlDepth: 2,\n  respectRobotsTxt: true,\n  requestDelay: 1.0,\n  customUserAgent: '',\n  maxResultsPerDork: 20,\n  maxConcurrentRequestsPerDomain: 2,\n  // Scheduling defaults\n  scheduleEnabled: false,\n  scheduleType: 'recurring',\n  scheduleCronExpression: '0 0 * * SUN', // Weekly on Sunday midnight\n  scheduleRunAtDate: new Date().toISOString().split('T')[0], // Default to today\n  scheduleRunAtTime: '00:00', \n  scheduleTimezone: Intl.DateTimeFormat().resolvedOptions().timeZone || 'UTC', // Default to browser timezone or UTC\n};\n\n// Navigation links for the sidebar\nexport const NAV_LINKS: NavItem[] = [\n  { title: 'Dashboard', href: '/dashboard', icon: LayoutDashboard, category: 'main' },\n  { title: 'Downloaded Files', href: '/downloaded-files', icon: Database, category: 'main' },\n  { title: 'Crawl Jobs', href: '/jobs', icon: GanttChartSquare, category: 'main' },\n  { title: 'Settings', href: '/settings', icon: SettingsIcon, category: 'main' },\n  { title: 'User Management', href: '/admin/users', icon: Users, category: 'main', adminOnly: true }, // Admin only\n  { title: 'Profile', href: '/profile', icon: UserCircle, category: 'account' }, // Moved Profile here\n  { title: 'Preferences', href: '/profile/preferences', icon: UserCog, category: 'account' }, // Added Preferences\n  { title: 'Ethical Guidelines', href: '/guidelines', icon: Info, category: 'account' },\n  { title: 'Documentation', href: '/documentation', icon: BookOpen, category: 'account' },\n];\n\n// Mapping file extensions to categories for icons or display\nexport const FILE_TYPE_EXTENSIONS: Record<string, string[]> = {\n  text: ['txt', 'md', 'log', 'csv', 'tsv', 'rtf', 'xml', 'yaml', 'yml', 'ini', 'conf', 'config', 'pem', 'key'],\n  json: ['json'],\n  database: ['sql', 'db', 'sqlite', 'mdb', 'dump', 'bak'],\n  archive: ['zip', 'rar', '7z', 'tar', 'gz', 'bz2', 'xz'],\n  code: ['js', 'jsx', 'ts', 'tsx', 'py', 'java', 'c', 'cpp', 'h', 'cs', 'php', 'rb', 'go', 'html', 'css', 'scss', 'less', 'sh', 'bat', 'ps1', 'env'],\n  spreadsheet: ['xlsx', 'xls', 'ods'],\n  document: ['pdf', 'docx', 'doc', 'odt', 'ppt', 'pptx', 'odp'],\n  config: ['config', 'cfg', 'conf', 'properties', 'toml'] // Added config category\n};\n"],"names":[],"mappings":"AAAA,uBAAuB;;;;;;;AAEvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAYO,MAAM,WAAW;AAGjB,MAAM,mBAAqC;IAChD,UAAU;IACV,gBAAgB;IAChB,UAAU;IACV,aAAa,CAAC;;;;;;;2CAO2B,CAAC;IAC1C,YAAY;IACZ,kBAAkB;IAClB,cAAc;IACd,iBAAiB;IACjB,mBAAmB;IACnB,gCAAgC;IAChC,sBAAsB;IACtB,iBAAiB;IACjB,cAAc;IACd,wBAAwB;IACxB,mBAAmB,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;IACzD,mBAAmB;IACnB,kBAAkB,KAAK,cAAc,GAAG,eAAe,GAAG,QAAQ,IAAI;AACxE;AAGO,MAAM,YAAuB;IAClC;QAAE,OAAO;QAAa,MAAM;QAAc,MAAM,+NAAA,CAAA,kBAAe;QAAE,UAAU;IAAO;IAClF;QAAE,OAAO;QAAoB,MAAM;QAAqB,MAAM,6MAAA,CAAA,WAAQ;QAAE,UAAU;IAAO;IACzF;QAAE,OAAO;QAAc,MAAM;QAAS,MAAM,qOAAA,CAAA,mBAAgB;QAAE,UAAU;IAAO;IAC/E;QAAE,OAAO;QAAY,MAAM;QAAa,MAAM,6MAAA,CAAA,WAAY;QAAE,UAAU;IAAO;IAC7E;QAAE,OAAO;QAAmB,MAAM;QAAgB,MAAM,uMAAA,CAAA,QAAK;QAAE,UAAU;QAAQ,WAAW;IAAK;IACjG;QAAE,OAAO;QAAW,MAAM;QAAY,MAAM,qNAAA,CAAA,aAAU;QAAE,UAAU;IAAU;IAC5E;QAAE,OAAO;QAAe,MAAM;QAAwB,MAAM,+MAAA,CAAA,UAAO;QAAE,UAAU;IAAU;IACzF;QAAE,OAAO;QAAsB,MAAM;QAAe,MAAM,qMAAA,CAAA,OAAI;QAAE,UAAU;IAAU;IACpF;QAAE,OAAO;QAAiB,MAAM;QAAkB,MAAM,iNAAA,CAAA,WAAQ;QAAE,UAAU;IAAU;CACvF;AAGM,MAAM,uBAAiD;IAC5D,MAAM;QAAC;QAAO;QAAM;QAAO;QAAO;QAAO;QAAO;QAAO;QAAQ;QAAO;QAAO;QAAQ;QAAU;QAAO;KAAM;IAC5G,MAAM;QAAC;KAAO;IACd,UAAU;QAAC;QAAO;QAAM;QAAU;QAAO;QAAQ;KAAM;IACvD,SAAS;QAAC;QAAO;QAAO;QAAM;QAAO;QAAM;QAAO;KAAK;IACvD,MAAM;QAAC;QAAM;QAAO;QAAM;QAAO;QAAM;QAAQ;QAAK;QAAO;QAAK;QAAM;QAAO;QAAM;QAAM;QAAQ;QAAO;QAAQ;QAAQ;QAAM;QAAO;QAAO;KAAM;IAClJ,aAAa;QAAC;QAAQ;QAAO;KAAM;IACnC,UAAU;QAAC;QAAO;QAAQ;QAAO;QAAO;QAAO;QAAQ;KAAM;IAC7D,QAAQ;QAAC;QAAU;QAAO;QAAQ;QAAc;KAAO,CAAC,wBAAwB;AAClF","debugId":null}},
    {"offset": {"line": 491, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/layout/app-shell.tsx"],"sourcesContent":["'use client'; // Required because we use hooks like usePathname and useAuth\n\nimport type { ReactNode } from 'react';\nimport { useEffect } from 'react';\nimport Link from 'next/link';\nimport { useRouter, usePathname } from 'next/navigation'; // Corrected import\nimport {\n  Sidebar,\n  SidebarHeader,\n  SidebarContent,\n  SidebarMenu,\n  SidebarMenuItem,\n  SidebarMenuButton,\n  SidebarTrigger,\n  SidebarInset,\n  SidebarFooter,\n} from '@/components/ui/sidebar';\nimport { Button } from '@/components/ui/button';\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuLabel, DropdownMenuSeparator, DropdownMenuTrigger } from '@/components/ui/dropdown-menu';\nimport { ShieldAlert, LogOut, UserCircle, Loader2, UserCog } from 'lucide-react'; // Added icons\nimport { APP_NAME, NAV_LINKS } from '@/lib/constants';\nimport { useAuth } from '@/context/auth-context'; // Import useAuth\n\ninterface AppShellProps {\n  children: ReactNode;\n}\n\nexport function AppShell({ children }: AppShellProps) {\n  const pathname = usePathname();\n  const router = useRouter();\n  const { user, isAuthenticated, isLoading, logout } = useAuth();\n\n  // Route Protection Logic\n  useEffect(() => {\n    // Don't run protection logic until auth state is determined\n    if (isLoading) return;\n\n    const publicPaths = ['/login', '/signup'];\n    const isAdminRoute = pathname?.startsWith('/admin');\n    const isAuthRoute = publicPaths.includes(pathname || '');\n\n    // If user is not authenticated and trying to access a protected route\n    if (!isAuthenticated && !isAuthRoute) {\n      router.replace('/login');\n    }\n    // If user is authenticated and trying to access login/signup\n    else if (isAuthenticated && isAuthRoute) {\n      router.replace('/dashboard'); // Redirect logged-in users away from auth pages\n    }\n    // If user is not admin and trying to access an admin route\n    else if (isAuthenticated && user?.role !== 'admin' && isAdminRoute) {\n      router.replace('/dashboard'); // Redirect non-admins away from admin pages\n    }\n  }, [isAuthenticated, isLoading, pathname, router, user?.role]);\n\n\n  // Determine which nav links to show based on role\n  const visibleNavLinks = NAV_LINKS.filter(link => {\n    if (link.adminOnly) {\n      return user?.role === 'admin';\n    }\n    return true;\n  });\n\n  // Show loading state or nothing if loading and not authenticated yet on protected routes\n  if (isLoading && !['/login', '/signup'].includes(pathname || '')) {\n    return (\n      <div className=\"flex h-screen items-center justify-center bg-background\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-accent\" />\n      </div>\n    );\n  }\n\n  // If trying to access protected routes while not authenticated (after loading), render null or redirect\n  if (!isLoading && !isAuthenticated && !['/login', '/signup'].includes(pathname || '')) {\n    return null; // Or a specific \"Unauthorized\" component\n  }\n  // If trying to access admin routes while not admin (after loading), render null or redirect\n  if (!isLoading && isAuthenticated && user?.role !== 'admin' && pathname?.startsWith('/admin')) {\n       return null; // Or a specific \"Forbidden\" component\n  }\n\n\n  // Render AppShell only if authenticated or on public paths\n  if (isAuthenticated || ['/login', '/signup'].includes(pathname || '')) {\n      // Don't render shell for login/signup pages\n      if (['/login', '/signup'].includes(pathname || '')) {\n        return <>{children}</>; // Render only the page content\n      }\n    \n    return (\n      <div className=\"flex min-h-screen w-full\">\n        <Sidebar collapsible=\"icon\" variant=\"sidebar\" side=\"left\">\n          <SidebarHeader className=\"p-4\">\n            <Link href=\"/\" className=\"flex items-center gap-2 text-xl font-semibold text-primary-foreground\">\n              <ShieldAlert className=\"h-7 w-7 text-accent\" />\n              <span>{APP_NAME}</span>\n            </Link>\n          </SidebarHeader>\n          <SidebarContent className=\"p-2\">\n            <SidebarMenu>\n              {visibleNavLinks.map((item) => (\n                <SidebarMenuItem key={item.title}>\n                  <Link href={item.href} legacyBehavior passHref>\n                    <SidebarMenuButton\n                      asChild\n                      isActive={pathname === item.href}\n                      tooltip={item.title}\n                      disabled={item.disabled}\n                    >\n                      <a>\n                        <item.icon />\n                        <span>{item.title}</span>\n                      </a>\n                    </SidebarMenuButton>\n                  </Link>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarContent>\n          <SidebarFooter className=\"p-4 mt-auto border-t border-sidebar-border\">\n             <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                   <Button variant=\"ghost\" className=\"w-full justify-start px-2 py-1 h-auto text-left text-sidebar-foreground hover:bg-sidebar-accent\">\n                      <Avatar className=\"h-7 w-7 mr-2\">\n                          <AvatarImage src={user?.avatarUrl || undefined} alt={user?.name || user?.email || 'User'}/>\n                          <AvatarFallback className=\"bg-sidebar-accent text-sidebar-accent-foreground text-xs\">\n                              {user?.name ? user.name[0].toUpperCase() : user?.email ? user.email[0].toUpperCase() : '?'}\n                          </AvatarFallback>\n                      </Avatar>\n                      <div className=\"flex-1 truncate group-data-[collapsible=icon]:hidden\">\n                          <p className=\"text-sm font-medium\">{user?.name || 'User Profile'}</p>\n                          <p className=\"text-xs text-muted-foreground truncate\">{user?.email}</p>\n                      </div>\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent side=\"right\" align=\"start\" className=\"w-56\">\n                   <DropdownMenuLabel className=\"font-normal\">\n                      <div className=\"flex flex-col space-y-1\">\n                          <p className=\"text-sm font-medium leading-none\">{user?.name || 'User'}</p>\n                          <p className=\"text-xs leading-none text-muted-foreground\">{user?.email}</p>\n                      </div>\n                   </DropdownMenuLabel>\n                  <DropdownMenuSeparator />\n                  {/* Add Profile Link if profile page exists */}\n                  {/* <DropdownMenuItem asChild><Link href=\"/profile\">Profile</Link></DropdownMenuItem> */}\n                  <DropdownMenuItem onClick={logout}>\n                    <LogOut className=\"mr-2 h-4 w-4\" />\n                    <span>Log out</span>\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n             </DropdownMenu>\n          </SidebarFooter>\n        </Sidebar>\n\n        <SidebarInset className=\"flex flex-col\">\n          <header className=\"sticky top-0 z-10 flex h-14 items-center justify-between border-b bg-background/80 px-4 backdrop-blur-sm lg:px-6\">\n            <div className=\"flex items-center gap-2\">\n              <SidebarTrigger className=\"md:hidden\" />\n              <h1 className=\"text-xl font-semibold\">\n                {NAV_LINKS.find(link => pathname?.startsWith(link.href))?.title || APP_NAME}\n              </h1>\n            </div>\n            {/* Header actions could go here */}\n          </header>\n          <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\n            {children}\n          </main>\n        </SidebarInset>\n      </div>\n    );\n  }\n  \n  // Fallback if none of the conditions match (should ideally not happen)\n  return null;\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 937, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 1040, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAI3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG,oKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1079, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,qKAAA,CAAA,OAAqB;QACpB,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sXACA;QAED,GAAG,KAAK;QACT,KAAK;kBAEL,cAAA,6LAAC,qKAAA,CAAA,QAAsB;YACrB,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV;;;;;;;;;;;;AAKR,OAAO,WAAW,GAAG,qKAAA,CAAA,OAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1122, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/config/config.ts"],"sourcesContent":["// src/config/config.ts\n\nexport const NEXT_PUBLIC_BACKEND_API_URL = process.env.NEXT_PUBLIC_BACKEND_API_URL || 'http://localhost:8000';\n"],"names":[],"mappings":"AAAA,uBAAuB;;;;AAEoB;AAApC,MAAM,8BAA8B,gKAAA,CAAA,UAAO,CAAC,GAAG,CAAC,2BAA2B,IAAI","debugId":null}},
    {"offset": {"line": 1137, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/services/breachwatch-api.ts"],"sourcesContent":["// src/services/breachwatch-api.ts\nimport type { SettingsFormData, DownloadedFileEntry, CrawlJob, ScheduleData, UserPreferences, User, UserStatusUpdate, UserRoleUpdate } from '@/types';\nimport { NEXT_PUBLIC_BACKEND_API_URL } from '@/config/config';\n\n// Helper to construct full API URLs\nconst getApiUrl = (path: string) => `${NEXT_PUBLIC_BACKEND_API_URL}/api/v1${path}`;\n\n// Helper for making API requests\nasync function apiRequest<T>(\n  path: string,\n  method: 'GET' | 'POST' | 'PUT' | 'DELETE' = 'GET',\n  body?: any\n): Promise<T> {\n  const url = getApiUrl(path);\n  const options: RequestInit = {\n    method,\n    headers: {\n      'Content-Type': 'application/json',\n      // In a real app, Authorization header with JWT token would be added here\n      // 'Authorization': `Bearer ${getToken()}`,\n    },\n  };\n\n  if (body) {\n    options.body = JSON.stringify(body);\n  }\n\n  try {\n    const response = await fetch(url, options);\n    if (!response.ok) {\n      let errorDetails = 'Unknown error';\n      try {\n        // Try to parse error response as JSON, fallback to text\n        const errorData = await response.json();\n        errorDetails = errorData.detail || JSON.stringify(errorData);\n      } catch (e) {\n        errorDetails = await response.text().catch(() => 'Failed to parse error response');\n      }\n      console.error(`API Error: ${response.status} ${response.statusText} for ${method} ${url}`, errorDetails);\n      // For 404 on GET preferences, we might want to return null instead of throwing an error.\n      if (method === 'GET' && response.status === 404 && path.includes('/preferences')) {\n        return null as T;\n      }\n      throw new Error(`API request failed: ${response.status} ${response.statusText}. Details: ${errorDetails}`);\n    }\n    if (response.status === 204 || response.headers.get('content-length') === '0') { \n        return null as T; \n    }\n    return response.json() as Promise<T>;\n  } catch (error) {\n    console.error(`Network or other error during API request to ${url}:`, error);\n    throw error; \n  }\n}\n\n// --- CrawlJob Endpoints ---\n\nexport interface BackendCrawlSettings {\n  keywords: string[];\n  file_extensions: string[];\n  seed_urls: string[];\n  search_dorks: string[];\n  crawl_depth: number;\n  respect_robots_txt: boolean;\n  request_delay_seconds: number;\n  use_search_engines: boolean;\n  max_results_per_dork?: number | null;\n  max_concurrent_requests_per_domain?: number | null;\n  custom_user_agent?: string | null;\n  schedule?: ScheduleData | null;\n}\n\nexport interface CreateCrawlJobPayload {\n  name?: string;\n  settings: BackendCrawlSettings;\n}\n\nexport interface MessageResponse {\n  message: string;\n}\n\nexport const createCrawlJob = async (payload: CreateCrawlJobPayload): Promise<CrawlJob> => {\n  return apiRequest<CrawlJob>('/crawl/jobs', 'POST', payload);\n};\n\nexport const getCrawlJobs = async (skip: number = 0, limit: number = 100): Promise<CrawlJob[]> => {\n  return apiRequest<CrawlJob[]>(`/crawl/jobs?skip=${skip}&limit=${limit}`);\n};\n\nexport const getCrawlJob = async (jobId: string): Promise<CrawlJob> => {\n  return apiRequest<CrawlJob>(`/crawl/jobs/${jobId}`);\n};\n\nexport const stopCrawlJob = async (jobId: string): Promise<MessageResponse> => {\n  return apiRequest<MessageResponse>(`/crawl/jobs/${jobId}/stop`, 'POST');\n};\n\nexport const deleteCrawlJob = async (jobId: string): Promise<void> => {\n  return apiRequest<void>(`/crawl/jobs/${jobId}`, 'DELETE');\n};\n\nexport const manuallyRunJob = async (jobId: string): Promise<CrawlJob> => {\n  return apiRequest<CrawlJob>(`/crawl/jobs/${jobId}/run`, 'POST');\n};\n\n// --- DownloadedFile Endpoints ---\n\nexport const getDownloadedFiles = async (jobId?: string, skip: number = 0, limit: number = 100): Promise<DownloadedFileEntry[]> => {\n  let path = '/crawl/results/downloaded?';\n  if (jobId) {\n    path += `job_id=${jobId}&`;\n  }\n  path += `skip=${skip}&limit=${limit}`;\n  return apiRequest<DownloadedFileEntry[]>(path);\n};\n\nexport const deleteDownloadedFileRecord = async (fileId: string, deletePhysical: boolean = false): Promise<void> => {\n   // Backend expects delete_physical in the body\n  return apiRequest<void>(`/crawl/results/downloaded/${fileId}`, 'DELETE', { delete_physical: deletePhysical });\n};\n\n\n// --- User Preferences Endpoints ---\nexport const getUserPreferences = async (userId: string): Promise<UserPreferences | null> => {\n  return apiRequest<UserPreferences | null>(`/users/${userId}/preferences`, 'GET');\n};\n\n// Note: Backend schema only expects preference fields, not user_id or updated_at in PUT body\nexport const updateUserPreferences = async (userId: string, preferences: Omit<UserPreferences, 'user_id' | 'updated_at'>): Promise<UserPreferences> => {\n  return apiRequest<UserPreferences>(`/users/${userId}/preferences`, 'PUT', preferences);\n};\n\n// --- User Management Endpoints ---\nexport const getUsers = async (skip: number = 0, limit: number = 100): Promise<User[]> => {\n  return apiRequest<User[]>(`/users?skip=${skip}&limit=${limit}`);\n};\n\nexport const getUser = async (userId: string): Promise<User> => {\n  return apiRequest<User>(`/users/${userId}`);\n};\n\nexport const updateUserStatus = async (userId: string, payload: UserStatusUpdate): Promise<User> => {\n  return apiRequest<User>(`/users/${userId}/status`, 'PUT', payload);\n};\n\nexport const updateUserRole = async (userId: string, payload: UserRoleUpdate): Promise<User> => {\n  return apiRequest<User>(`/users/${userId}/role`, 'PUT', payload);\n};\n\nexport const deleteUser = async (userId: string): Promise<void> => {\n  return apiRequest<void>(`/users/${userId}`, 'DELETE');\n};\n\n// --- Password Change Endpoint ---\nexport const changePassword = async (userId: string, currentPassword: string, newPassword: string): Promise<MessageResponse> => {\n  const payload = {\n    current_password: currentPassword,\n    new_password: newPassword,\n  };\n  return apiRequest<MessageResponse>(`/users/${userId}/password`, 'PUT', payload);\n};\n\n\n// --- Helper Function ---\n// Helper to parse frontend settings strings into backend-compatible arrays/objects\nexport const parseSettingsForBackend = (settings: SettingsFormData): BackendCrawlSettings => {\n  const parseStringList = (str: string | undefined, separator: RegExp = /,|\\n/): string[] => {\n    return str ? str.split(separator).map(s => s.trim()).filter(s => s) : [];\n  };\n  \n  const parseFileExtensions = (str: string | undefined): string[] => {\n     // Returns extensions *without* the leading dot for backend\n     return str ? str.split(/,|\\n/).map(s => s.trim().replace(/^\\./, '')).filter(s => s) : [];\n  }\n\n  let schedule: ScheduleData | null = null;\n  if (settings.scheduleEnabled) {\n    schedule = {\n      type: settings.scheduleType,\n      // Use ?. for optional chaining and provide null if undefined/empty\n      cronExpression: settings.scheduleType === 'recurring' ? settings.scheduleCronExpression?.trim() || null : null,\n      runAt: settings.scheduleType === 'one-time' && settings.scheduleRunAtDate && settings.scheduleRunAtTime\n        ? new Date(`${settings.scheduleRunAtDate}T${settings.scheduleRunAtTime}:00`).toISOString() \n        : null,\n      timezone: settings.scheduleTimezone?.trim() || null,\n    };\n     // Validate that required fields for the type are present\n     if (schedule.type === 'recurring' && !schedule.cronExpression) {\n         console.warn(\"Recurring schedule enabled but cron expression is missing.\");\n         // Optionally throw an error or default schedule to null\n         // schedule = null; \n     }\n     if (schedule.type === 'one-time' && !schedule.runAt) {\n         console.warn(\"One-time schedule enabled but run date/time is missing or invalid.\");\n         // Optionally throw an error or default schedule to null\n         // schedule = null;\n     }\n  }\n\n\n  return {\n    keywords: parseStringList(settings.keywords),\n    file_extensions: parseFileExtensions(settings.fileExtensions),\n    seed_urls: parseStringList(settings.seedUrls),\n    search_dorks: parseStringList(settings.searchDorks),\n    crawl_depth: settings.crawlDepth,\n    respect_robots_txt: settings.respectRobotsTxt,\n    request_delay_seconds: settings.requestDelay,\n    use_search_engines: true, // Assuming this is always true from frontend for now\n    max_results_per_dork: settings.maxResultsPerDork || null, // Ensure null if 0 or undefined\n    max_concurrent_requests_per_domain: settings.maxConcurrentRequestsPerDomain || null, // Ensure null if 0 or undefined\n    custom_user_agent: settings.customUserAgent?.trim() || null, // Ensure null if empty\n    schedule: schedule,\n  };\n};\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1313, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/profile/preferences/page.tsx"],"sourcesContent":["\n'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { AppShell } from '@/components/layout/app-shell';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Switch } from '@/components/ui/switch';\nimport { useToast } from '@/hooks/use-toast';\nimport type { UserPreferences as UserPreferencesType } from '@/types';\nimport { Save, UserCog, RotateCcw, Loader2 } from 'lucide-react';\nimport { useAuth } from '@/context/auth-context';\nimport { getUserPreferences, updateUserPreferences } from '@/services/breachwatch-api'; // Use new API functions\n\nconst DEFAULT_PREFERENCES: Omit<UserPreferencesType, 'user_id' | 'updated_at'> = {\n  default_items_per_page: 10,\n  receive_email_notifications: true,\n};\n\nexport default function UserPreferencesPage() {\n  const { user, isLoading: isAuthLoading } = useAuth();\n  const [preferences, setPreferences] = useState<Omit<UserPreferencesType, 'user_id' | 'updated_at'>>(DEFAULT_PREFERENCES);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSaving, setIsSaving] = useState(false);\n  const { toast } = useToast();\n\n  const fetchPreferences = useCallback(async (userId: string) => {\n      setIsLoading(true);\n      try {\n        const data = await getUserPreferences(userId);\n        if (data) {\n          setPreferences({\n            default_items_per_page: data.default_items_per_page,\n            receive_email_notifications: data.receive_email_notifications,\n          });\n        } else {\n          setPreferences(DEFAULT_PREFERENCES);\n        }\n      } catch (error) {\n        console.error(\"Failed to fetch user preferences:\", error);\n        toast({\n          title: \"Error Loading Preferences\",\n          description: \"Could not load your preferences. Using default values.\",\n          variant: \"destructive\",\n        });\n        setPreferences(DEFAULT_PREFERENCES);\n      } finally {\n        setIsLoading(false);\n      }\n  }, [toast]);\n\n  useEffect(() => {\n    if (user?.id) {\n        fetchPreferences(user.id);\n    } else if (!isAuthLoading) {\n      // If auth is not loading and user is still null, means not logged in\n      setIsLoading(false); // Stop loading indicator\n      // Potentially show a message or redirect (AppShell might handle redirect)\n    }\n  }, [user, isAuthLoading, fetchPreferences]);\n\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value, type, checked } = e.target;\n    setPreferences(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : type === 'number' ? parseInt(value, 10) || 0 : value, // Ensure number parsing\n    }));\n  };\n  \n  const handleSwitchChange = (checked: boolean, name: keyof Omit<UserPreferencesType, 'user_id' | 'updated_at'>) => {\n    setPreferences(prev => ({\n      ...prev,\n      [name]: checked,\n    }));\n  };\n\n\n  const handleSavePreferences = async () => {\n    if (!user?.id) {\n      toast({ title: \"Error\", description: \"User not identified. Cannot save preferences.\", variant: \"destructive\" });\n      return;\n    }\n    setIsSaving(true);\n    try {\n      // Prepare payload with only the necessary fields\n      const payload: Omit<UserPreferencesType, 'user_id' | 'updated_at'> = {\n        default_items_per_page: preferences.default_items_per_page,\n        receive_email_notifications: preferences.receive_email_notifications,\n      };\n      await updateUserPreferences(user.id, payload); // Pass only the updatable fields\n      toast({\n        title: \"Preferences Saved\",\n        description: \"Your preferences have been successfully updated.\",\n      });\n    } catch (error) {\n      console.error(\"Failed to save user preferences:\", error);\n      toast({\n        title: \"Error Saving Preferences\",\n        description: error instanceof Error ? error.message : \"Could not save your preferences. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const handleResetDefaults = () => {\n    setPreferences(DEFAULT_PREFERENCES);\n    toast({\n      title: \"Preferences Reset\",\n      description: \"Settings have been reset to defaults. Click 'Save Preferences' to apply.\",\n      variant: \"default\",\n    });\n  };\n\n  if (isLoading || isAuthLoading) {\n    return (\n      <AppShell>\n        <div className=\"flex items-center justify-center h-full\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-accent\" />\n          <p className=\"ml-2\">Loading preferences...</p>\n        </div>\n      </AppShell>\n    );\n  }\n  \n  if (!user) {\n     return (\n      <AppShell>\n        <div className=\"flex items-center justify-center h-full\">\n          <p>Please log in to manage your preferences.</p>\n        </div>\n      </AppShell>\n    );\n  }\n\n\n  return (\n    <AppShell>\n      <Card className=\"max-w-2xl mx-auto shadow-xl\">\n        <CardHeader>\n          <CardTitle className=\"text-2xl flex items-center\">\n            <UserCog className=\"h-7 w-7 mr-2 text-accent\" />\n            User Preferences\n          </CardTitle>\n          <CardDescription>\n            Customize your application experience. Changes are saved per user.\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"default_items_per_page\">Default Items Per Page</Label>\n            <Input\n              id=\"default_items_per_page\"\n              name=\"default_items_per_page\"\n              type=\"number\"\n              value={preferences.default_items_per_page}\n              onChange={handleInputChange}\n              min=\"5\"\n              max=\"100\"\n              className=\"w-32\"\n              disabled={isSaving}\n            />\n            <p className=\"text-sm text-muted-foreground\">\n              Set the default number of items displayed in tables (e.g., Dashboard, File Records).\n            </p>\n          </div>\n\n          <div className=\"flex items-center space-x-3\">\n            <Switch\n              id=\"receive_email_notifications\"\n              name=\"receive_email_notifications\"\n              checked={preferences.receive_email_notifications}\n              onCheckedChange={(checked) => handleSwitchChange(checked, \"receive_email_notifications\")}\n              disabled={isSaving}\n            />\n            <Label htmlFor=\"receive_email_notifications\">Receive Email Notifications</Label>\n          </div>\n           <p className=\"text-sm text-muted-foreground -mt-4 ml-[3.25rem]\">\n              Enable or disable email notifications for critical findings or job completions. (Note: Email functionality backend is not yet implemented).\n            </p>\n\n          {/* Add more preference settings here as needed */}\n\n        </CardContent>\n        <CardFooter className=\"flex justify-end space-x-3 border-t pt-6\">\n          <Button type=\"button\" variant=\"outline\" onClick={handleResetDefaults} disabled={isSaving}>\n            <RotateCcw className=\"mr-2 h-4 w-4\" />\n            Reset to Defaults\n          </Button>\n          <Button type=\"button\" onClick={handleSavePreferences} disabled={isSaving}>\n            {isSaving ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : <Save className=\"mr-2 h-4 w-4\" />}\n            {isSaving ? 'Saving...' : 'Save Preferences'}\n          </Button>\n        </CardFooter>\n      </Card>\n    </AppShell>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}